(function(win,$){var browser={ie10:win.navigator.msPointerEnabled,ie11:win.navigator.pointerEnabled};var events=["touchstart","touchmove","touchend"];var support={touch:(win.Modernizr&&Modernizr.touch===true)||(function(){return !!(("ontouchstart" in win)||win.DocumentTouch&&document instanceof DocumentTouch)})()};if(browser.ie10){events=["MSPointerDown","MSPointerMove","MSPointerUp"]}if(browser.ie11){events=["pointerdown","pointermove","pointerup"]}var touchEvents={touchStart:events[0],touchMove:events[1],touchEnd:events[2]};$.fn.swipeSlide=function(options){return new sS(this,options)};var sS=function(element,options){var me=this;me.$el=$(element);me._distance=50;me.allowSlideClick=true;me.init(options)};sS.prototype.init=function(options){var me=this;me.opts=$.extend({},{ul:me.$el.children("ul"),li:me.$el.children().children("li"),index:0,continuousScroll:false,autoSwipe:true,speed:4000,axisX:true,transitionType:"ease",lazyLoad:false,callback:function(){}},options);me._index=me.opts.index;me._liLength=me.opts.li.length;me.isScrolling;me.opts.callback(me._index,me._liLength);if(me._liLength<=1){if(me.opts.lazyLoad){fnLazyLoad(me,0)}return false}if(me.opts.continuousScroll){me.opts.ul.prepend(me.opts.li.last().clone()).append(me.opts.li.first().clone())}if(me.opts.lazyLoad){fnLazyLoad(me,me._index);if(me.opts.continuousScroll){fnLazyLoad(me,me._index+1);fnLazyLoad(me,me._index+2);if(me._index==0){fnLazyLoad(me,me._liLength)}else{if(me._index+1==me._liLength){fnLazyLoad(me,1)}}}else{fnLazyLoad(me,me._index+1==me._liLength?me._liLength-2:me._index+1)}}fnGetSlideDistance();if(browser.ie10||browser.ie11){var action="";if(me.opts.axisX){action="pan-y"}else{action="none"}me.$el.css({"-ms-touch-action":action,"touch-action":action});me.$el.on("click",function(){return me.allowSlideClick})}fnAutoSlide(me);me.$el.on(touchEvents.touchStart,function(e){fnTouchstart(e,me)});me.$el.on(touchEvents.touchMove,function(e){fnTouchmove(e,me)});me.$el.on(touchEvents.touchEnd,function(){fnTouchend(me)});me.opts.ul.on("webkitTransitionEnd MSTransitionEnd transitionend",function(){fnAutoSlide(me)});$(win).on("onorientationchange" in win?"orientationchange":"resize",function(){clearTimeout(me.timer);me.timer=setTimeout(fnGetSlideDistance,150)});function fnGetSlideDistance(){var $li=me.opts.ul.children();me._slideDistance=me.opts.axisX?me.opts.ul.width():me.opts.ul.height();fnTransition(me,me.opts.ul,0);fnTranslate(me,me.opts.ul,-me._slideDistance*me._index);fnTransition(me,$li,0);var num=me.opts.continuousScroll?-1:0;$li.each(function(i){fnTranslate(me,$(this),me._slideDistance*(i+num))})}};function fnTransition(me,dom,num){dom.css({"-webkit-transition":"all "+num+"s "+me.opts.transitionType,"transition":"all "+num+"s "+me.opts.transitionType})}function fnTranslate(me,dom,distance){var result=me.opts.axisX?distance+"px,0,0":"0,"+distance+"px,0";dom.css({"-webkit-transform":"translate3d("+result+")","transform":"translate3d("+result+")"})}function fnLazyLoad(me,index){var $li=me.opts.ul.children();var $thisImg=$li.eq(index).find("[data-src]");if($thisImg){$thisImg.each(function(i){var $this=$(this);if($this.is("img")){$this.attr("src",$this.data("src"));$this.removeAttr("data-src")}else{$this.css({"background-image":"url("+$this.data("src")+")"});$this.removeAttr("data-src")}})}}function fnTouches(e){if(support.touch&&!e.touches){e.touches=e.originalEvent.touches}}function fnTouchstart(e,me){me.isScrolling=undefined;me._moveDistance=me._moveDistanceIE=0;me._startX=support.touch?e.touches[0].pageX:(e.pageX||e.clientX);me._startY=support.touch?e.touches[0].pageY:(e.pageY||e.clientY)}function fnTouchmove(e,me){if(me.opts.autoSwipe){fnStopSlide(me)}me.allowSlideClick=false;me._curX=support.touch?e.touches[0].pageX:(e.pageX||e.clientX);me._curY=support.touch?e.touches[0].pageY:(e.pageY||e.clientY);me._moveX=me._curX-me._startX;me._moveY=me._curY-me._startY;if(typeof me.isScrolling=="undefined"){if(me.opts.axisX){me.isScrolling=!!(Math.abs(me._moveX)>=Math.abs(me._moveY))}else{me.isScrolling=!!(Math.abs(me._moveY)>=Math.abs(me._moveX))}}if(me.isScrolling){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}fnTransition(me,me.opts.ul,0);me._moveDistance=me._moveDistanceIE=me.opts.axisX?me._moveX:me._moveY}if(!me.opts.continuousScroll){if(me._index==0&&me._moveDistance>0||(me._index+1)>=me._liLength&&me._moveDistance<0){me._moveDistance=0}}fnTranslate(me,me.opts.ul,-(me._slideDistance*me._index-me._moveDistance))}function fnTouchend(me){if(!me.isScrolling){fnAutoSlide(me)}if(browser.ie10||browser.ie11){if(Math.abs(me._moveDistanceIE)<5){me.allowSlideClick=true}setTimeout(function(){me.allowSlideClick=true},100)}if(Math.abs(me._moveDistance)<=me._distance){fnSlide(me,"",".3")}else{if(me._moveDistance>me._distance){fnSlide(me,"prev",".3")}else{if(Math.abs(me._moveDistance)>me._distance){fnSlide(me,"next",".3")}}}me._moveDistance=me._moveDistanceIE=0}function fnAutoSlide(me){if(me.opts.autoSwipe){fnStopSlide(me);me.autoSlide=setInterval(function(){fnSlide(me,"next",".3")
},me.opts.speed)}}function fnStopSlide(me){clearInterval(me.autoSlide)}sS.prototype.goTo=function(i){var me=this;fnSlide(me,i,".3")};function fnSlide(me,go,num){if(typeof go==="number"){me._index=go;if(me.opts.lazyLoad){if(me.opts.continuousScroll){fnLazyLoad(me,me._index);fnLazyLoad(me,me._index+1);fnLazyLoad(me,me._index+2)}else{fnLazyLoad(me,me._index-1);fnLazyLoad(me,me._index);fnLazyLoad(me,me._index+1)}}}else{if(go=="next"){me._index++;if(me.opts.lazyLoad){if(me.opts.continuousScroll){fnLazyLoad(me,me._index+2);if(me._index+1==me._liLength){fnLazyLoad(me,1)}else{if(me._index==me._liLength){fnLazyLoad(me,0)}}}else{fnLazyLoad(me,me._index+1)}}}else{if(go=="prev"){me._index--;if(me.opts.lazyLoad){if(me.opts.continuousScroll){fnLazyLoad(me,me._index);if(me._index==0){fnLazyLoad(me,me._liLength)}else{if(me._index<0){fnLazyLoad(me,me._liLength-1)}}}else{fnLazyLoad(me,me._index-1)}}}}}if(me.opts.continuousScroll){if(me._index>=me._liLength){fnScroll(me,num);me._index=0;setTimeout(function(){fnScroll(me,0);me.opts.callback(me._index,me._liLength);return},300)}else{if(me._index<0){fnScroll(me,num);me._index=me._liLength-1;setTimeout(function(){fnScroll(me,0);me.opts.callback(me._index,me._liLength);return},300)}else{fnScroll(me,num)}}}else{if(me._index>=me._liLength){me._index=0}else{if(me._index<0){me._index=me._liLength-1}}fnScroll(me,num)}me.opts.callback(me._index,me._liLength)}function fnScroll(me,num){fnTransition(me,me.opts.ul,num);fnTranslate(me,me.opts.ul,-me._index*me._slideDistance)}})(window,window.Zepto||window.jQuery);